window.getShiftstonedUrl=function(){for(var exportSplit=document.getElementById("export-deck-text").innerHTML.split("\n"),regex=/^(\d+) .+Set(\d+) #(\d+).$/,marketTriplet=[2,0,0],tripletsArray=[],i=0;i<exportSplit.length;i++){var matches=exportSplit[i].match(regex);if(matches){var triplet=[parseInt(matches[1],10),parseInt(matches[2],10),parseInt(matches[3],10)];tripletsArray=tripletsArray.concat(triplet)}else 0<exportSplit[i].indexOf("MARKET")&&(tripletsArray=tripletsArray.concat(marketTriplet))}var encodedDeck=function(values){var code,error;code="";for(var j=0;j<values.length;j++){var r,i=values[j];if(error)return;if(i<0)return void(error="negative value");for(0===i&&(code+="A");0<i;)0<(i=(i-(r=i%32))/32)&&(r+=32),r<26?code+=String.fromCharCode(65+r):r<52?code+=String.fromCharCode(97+r-26):r<62?code+=String.fromCharCode(48+r-52):62===r?code+="-":63===r&&(code+="_")}return error?null:code}(tripletsArray),deckName=document.getElementById("deck-title").innerHTML,deckAuthor=document.getElementById("deck-author").innerHTML;return"https://www.shiftstoned.com/epc/?d="+encodedDeck+"&t="+encodeURIComponent("["+deckAuthor+"] "+deckName)};
